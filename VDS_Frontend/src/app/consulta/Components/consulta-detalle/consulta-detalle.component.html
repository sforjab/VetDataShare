<div class="container">
  <h2 class="title">Detalle de consulta</h2>
  <mat-card class="consulta-card">
    <mat-card-content>
      <!-- Información general -->
      <div class="details-header">
        <div class="details-column">
          <p><strong>Fecha:</strong> {{ consulta?.fechaConsulta | date: 'dd/MM/yyyy HH:mm' }}</p>
          <p><strong>Veterinario:</strong> {{ veterinario?.numColegiado || 'No disponible' }}</p>
          <p><strong>Clínica:</strong> {{ clinica?.nombre || 'No disponible' }}</p>
        </div>
        <div class="details-column">
          <p><strong>Número de chip:</strong> {{ mascota?.numChip || 'No disponible' }}</p>
          <p><strong>Nombre de mascota:</strong> {{ mascota?.nombre || 'No disponible' }}</p>
        </div>
      </div>

      <!-- Campos editables -->
      <div class="details-body">
        <div class="form-group">
          <label for="motivo">Motivo de consulta:</label>
          <textarea
            id="motivo"
            [(ngModel)]="motivo"
            rows="4"
            class="form-control full-width"
            [disabled]="!puedeEditar">
          </textarea>
        </div>

        <div class="form-group" *ngIf="mostrarNotas">
          <label for="notas">Notas:</label>
          <textarea
            id="notas"
            [(ngModel)]="notas"
            rows="4"
            class="form-control full-width"
            [disabled]="!puedeEditar">
          </textarea>
        </div>

        <div class="form-group">
          <label for="medicacion">Medicación:</label>
          <textarea
            id="medicacion"
            [(ngModel)]="medicacion"
            rows="4"
            class="form-control full-width"
            [disabled]="!puedeEditar">
          </textarea>
        </div>
      </div>

      <!-- Tablas -->
      <div class="data-table">
        <h3>Pruebas:</h3>
        <table>
          <thead>
            <tr>
              <th>Tipo</th>
              <th>Fecha</th>
              <th>Descripción</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let prueba of pruebas">
              <td>{{ prueba.tipo }}</td>
              <td>{{ prueba.fecha | date: 'dd/MM/yyyy' }}</td>
              <td>{{ prueba.descripcion }}</td>
              <td>
                <button mat-button>Acceder</button>
                <button mat-button>Eliminar</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="data-table">
        <h3>Vacunas:</h3>
        <table>
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Fecha</th>
              <th>Laboratorio</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let vacuna of vacunas">
              <td>{{ vacuna.nombre }}</td>
              <td>{{ vacuna.fecha | date: 'dd/MM/yyyy' }}</td>
              <td>{{ vacuna.laboratorio }}</td>
              <td>
                <button mat-button>Acceder</button>
                <button mat-button>Eliminar</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Botones -->
      <div class="form-actions">
        <button mat-raised-button color="primary" (click)="guardar()" [disabled]="!puedeEditar">Guardar</button>
        <button mat-raised-button color="warn" (click)="volver()">Volver</button>
      </div>
    </mat-card-content>
  </mat-card>
</div>
