<div class="detalle-consulta-container">
  <h1>Detalle de consulta</h1>

  <mat-card>
    <mat-card-content>
      <div class="detalle-consulta-header">
        <div class="header-item">
          <label>Fecha: </label>
          <span>{{ consulta?.fechaConsulta | date: 'dd/MM/yyyy HH:mm' }}</span>
        </div>
        <div class="header-item">
          <label>Veterinario: </label>
          <span>{{ consulta?.veterinario?.numColegiado }}</span>
        </div>
        <div class="header-item">
          <label>Número de chip: </label>
          <span>{{ consulta?.mascota?.numChip }}</span>
        </div>
        <div class="header-item">
          <label>Nombre de mascota: </label>
          <span>{{ consulta?.mascota?.nombre }}</span>
        </div>
      </div>

      <div class="detalle-section">
        <h3>Motivo de consulta:</h3>
        <p>{{ consulta?.motivo }}</p>
      </div>

      <div class="detalle-section">
        <h3>Notas:</h3>
        <p>{{ consulta?.notas }}</p>
      </div>

      <div class="detalle-section">
        <h3>Medicación:</h3>
        <p>{{ consulta?.medicacion }}</p>
      </div>

      <div class="detalle-section">
        <h3>Pruebas:</h3>
        <ng-container *ngIf="pruebas.length > 0; else noPruebas">
          <table mat-table [dataSource]="pruebas" class="mat-elevation-z8">
            <!-- Tipo -->
            <ng-container matColumnDef="tipo">
              <th mat-header-cell *matHeaderCellDef> Tipo </th>
              <td mat-cell *matCellDef="let prueba"> {{ prueba.tipo }} </td>
            </ng-container>

            <!-- Fecha -->
            <ng-container matColumnDef="fecha">
              <th mat-header-cell *matHeaderCellDef> Fecha </th>
              <td mat-cell *matCellDef="let prueba"> {{ prueba.fecha | date: 'dd/MM/yyyy' }} </td>
            </ng-container>

            <!-- Descripción -->
            <ng-container matColumnDef="descripcion">
              <th mat-header-cell *matHeaderCellDef> Descripción </th>
              <td mat-cell *matCellDef="let prueba"> {{ prueba.descripcion }} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="['tipo', 'fecha', 'descripcion']"></tr>
            <tr mat-row *matRowDef="let row; columns: ['tipo', 'fecha', 'descripcion'];"></tr>
          </table>
        </ng-container>
        <ng-template #noPruebas>
          <p>No existen pruebas asociadas.</p>
        </ng-template>
      </div>

      <div class="detalle-section">
        <h3>Vacunas:</h3>
        <ng-container *ngIf="vacunas.length > 0; else noVacunas">
          <table mat-table [dataSource]="vacunas" class="mat-elevation-z8">
            <!-- Nombre -->
            <ng-container matColumnDef="nombre">
              <th mat-header-cell *matHeaderCellDef> Nombre </th>
              <td mat-cell *matCellDef="let vacuna"> {{ vacuna.nombre }} </td>
            </ng-container>

            <!-- Fecha -->
            <ng-container matColumnDef="fecha">
              <th mat-header-cell *matHeaderCellDef> Fecha </th>
              <td mat-cell *matCellDef="let vacuna"> {{ vacuna.fecha | date: 'dd/MM/yyyy' }} </td>
            </ng-container>

            <!-- Laboratorio -->
            <ng-container matColumnDef="laboratorio">
              <th mat-header-cell *matHeaderCellDef> Laboratorio </th>
              <td mat-cell *matCellDef="let vacuna"> {{ vacuna.laboratorio }} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="['nombre', 'fecha', 'laboratorio']"></tr>
            <tr mat-row *matRowDef="let row; columns: ['nombre', 'fecha', 'laboratorio'];"></tr>
          </table>
        </ng-container>
        <ng-template #noVacunas>
          <p>No existen vacunas asociadas.</p>
        </ng-template>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Botones de acción -->
  <div class="botones">
    <button mat-raised-button color="primary" (click)="guardar()">Guardar</button>
    <button mat-raised-button color="warn" (click)="volver()">Volver</button>
  </div>
</div>