<div class="page-container">
  <!-- Spinner de carga -->
  <div *ngIf="isLoading" class="spinner-container">
    <mat-progress-spinner mode="indeterminate" diameter="50" color="primary"></mat-progress-spinner>
  </div>

  <!-- Contenido principal -->
  <div *ngIf="!isLoading">
    <!-- Título principal -->
    <h1>Detalles de Mascota</h1>

    <!-- Mat Card con el formulario -->
    <mat-card class="card perfil-card">
      <mat-card-content>
        <!-- Contenedor con diseño en grid -->
        <form class="perfil-form grid-form">
          <!-- Primera fila -->
          <mat-form-field appearance="fill">
            <mat-label>Número de Chip</mat-label>
            <input matInput [(ngModel)]="mascota.numChip" name="numChip" [readonly]="!puedeEditar" />
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Nombre</mat-label>
            <input matInput [(ngModel)]="mascota.nombre" name="nombre" [readonly]="!puedeEditar" />
          </mat-form-field>

          <!-- Segunda fila -->
          <mat-form-field appearance="fill">
            <mat-label>Especie</mat-label>
            <input matInput [(ngModel)]="mascota.especie" name="especie" [readonly]="!puedeEditar" />
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Raza</mat-label>
            <input matInput [(ngModel)]="mascota.raza" name="raza" [readonly]="!puedeEditar" />
          </mat-form-field>

          <!-- Tercera fila -->
          <mat-form-field appearance="fill">
            <mat-label>Sexo</mat-label>
            <input matInput [(ngModel)]="mascota.sexo" name="sexo" [readonly]="!puedeEditar" />
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Fecha de nacimiento</mat-label>
            <input matInput [matDatepicker]="picker" [(ngModel)]="mascota.fechaNacimiento" name="fechaNacimiento" [readonly]="!puedeEditar" />
            <mat-datepicker-toggle matSuffix [for]="picker" [disabled]="!puedeEditar"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>

          <!-- Cuarta fila -->
          <mat-form-field appearance="fill">
            <mat-label>Edad</mat-label>
            <input
              matInput
              [value]="mascota ? (mascota.fechaNacimiento | calcularEdad:'años') + ' años ' + (mascota.fechaNacimiento | calcularEdad:'meses') + ' meses' : 'No disponible'"
              readonly />
          </mat-form-field>

          <mat-form-field *ngIf="propietario" appearance="fill">
            <mat-label>Propietario</mat-label>
            <input matInput [value]="propietario.nombre + ' ' + propietario.apellido1 + ' ' + propietario.apellido2" readonly />
          </mat-form-field>
        </form>
      </mat-card-content>
      <!-- Botones centrados -->
      <mat-card-actions class="action-buttons">
        <button mat-raised-button class="button-primary" (click)="guardarCambios()" *ngIf="puedeEditar">Guardar</button>
        <button mat-raised-button class="button-secondary" (click)="volver()">Volver</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
