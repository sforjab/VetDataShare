<div class="page-container">
  <h1>Cambiar Contraseña</h1>
  <mat-card class="card form-card">
    <mat-card-content>
      <form [formGroup]="restablecerForm" class="restablecer-password-form grid-form" (ngSubmit)="guardarNuevoPassword()">
        <!-- Campo Nueva Contraseña -->
        <mat-form-field appearance="fill" [class.error]="campoEsInvalido('password')">
          <mat-label>Nueva contraseña</mat-label>
          <input matInput formControlName="password" type="password" aria-label="Introduce tu nueva contraseña, entre 8 y 16 caracteres" />
          <mat-error *ngIf="restablecerForm.get('password')?.hasError('required')">
            La contraseña es obligatoria.
          </mat-error>
          <mat-error *ngIf="restablecerForm.get('password')?.hasError('minlength')">
            Debe tener al menos 8 caracteres.
          </mat-error>
          <mat-error *ngIf="restablecerForm.get('password')?.hasError('maxlength')">
            Debe tener como máximo 16 caracteres.
          </mat-error>
        </mat-form-field>

        <!-- Campo Confirmar Contraseña -->
        <mat-form-field appearance="fill" [class.error]="campoEsInvalido('confirmarPassword')">
          <mat-label>Confirmar contraseña</mat-label>
          <input matInput formControlName="confirmarPassword" type="password" aria-label="Confirma tu nueva contraseña, entre 8 y 16 caracteres" />
          <mat-error *ngIf="restablecerForm.get('confirmarPassword')?.hasError('required')">
            La confirmación es obligatoria.
          </mat-error>
          <mat-error *ngIf="restablecerForm.get('confirmarPassword')?.hasError('minlength')">
            Debe tener al menos 8 caracteres.
          </mat-error>
          <mat-error *ngIf="restablecerForm.get('confirmarPassword')?.hasError('maxlength')">
            Debe tener como máximo 16 caracteres.
          </mat-error>
        </mat-form-field>

        <!-- Mensaje de error general -->
        <div *ngIf="errorMensaje" class="error-message" aria-label="Mensaje de error general">
          {{ errorMensaje }}
        </div>

        <!-- Botones -->
        <div class="action-buttons">
          <button mat-raised-button type="submit" class="button-primary" 
                  [disabled]="restablecerForm.invalid" aria-label="Guardar la nueva contraseña">
            Guardar
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
